{
  "openapi": "3.0.0",
  "info": {
    "title": "API investments",
    "description": "API for an application that stores and manages investments. \n\n In the Investments group routes, the authentication token is required, first create in investor record and then use the registered investor's data to authenticate,  a token is generated in the authenticate route, copy the token and then click Authorize and paste the token in the bearer Auth field to release the other routes.\n\n To test, open the desired route and click on \"Try it out\", a scheme will appear in JSON format with predefined values, then click on \"Execute\".\n\n There is important information from the get /investment/{page} tab",
    "version": "1.0.0",
    "contact": {
      "email": "rafaeljunio7@gmail.com"
    }
  },
  "paths": {
    "/investor": {
      "post": {
        "tags": [
          "Investor"
        ],
        "summary": "Create a investor",
        "description": "Create a new investor",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "example": {
                  "name": "Name",
                  "email": "investor@email.com",
                  "password": "123456"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "500": {
            "description": "Investor already exists"
          }
        }
      }
    },
    "/authenticate": {
      "post": {
        "tags": [
          "Authenticate"
        ],
        "summary": "Authentication investor",
        "description": "Authentication investor",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "example": {
                  "email": "investor@email.com",
                  "password": "123456"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success"
          },
          "400": {
            "description": "Email or password incorrect"
          }
        }
      }
    },
    "/investment": {
      "post": {
        "tags": [
          "Investments"
        ],
        "summary": "Create a new investment",
        "description": "Create a new investment",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "created_at": {
                    "type": "date"
                  },
                  "capital": {
                    "type": "float"
                  }
                },
                "example": {
                  "created_at": "2020-12-29T18:12:20.631Z",
                  "capital": 1500.00
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Investment already exists"
          }
        }
      }
    },
    "/investment/{page}": {
      "get": {
        "tags": [
          "Investments"
        ],
        "summary": "List all investments by investor",
        "description": "The following fields: period_month, income, tax, total_brute and total_withdrawn are just informational fields that predict investment withdrawal values ​​and are not properties in the database's investments table.\n\n The investment record that has the withdrawn_at field with value null means that this investment has not been withdrawn.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "path",
            "description": "Number page, The value 0 or empty corresponds to the first page of the pagination, for testing purposes the pagination is listing only two records per page.",
            "required": false,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "id_investor": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/withdrawn/{investment_id}": {
      "put": {
        "tags": [
          "Investments"
        ],
        "summary": "Cash out the investment",
        "description": "Cash out the investment",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "withdrawn_at": {
                    "type": "date"
                  }
                },
                "example": {
                  "withdrawn_at": "2021-12-29T18:12:20.631Z"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "investment_id",
            "in": "path",
            "description": "Investment id for withdrawal",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "withdrawn_at": {
                        "type": "Date"
                      }
                    },
                    "example": {
                      "withdrawn_at": "2021-12-31T12:12:20.631Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}